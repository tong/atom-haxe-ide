(function(U,ba){function W(a,c){function b(){}b.prototype=a;var m=new b,x;for(x in c)m[x]=c[x];c.toString!==Object.prototype.toString&&(m.toString=c.toString);return m}function K(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=ca++);var b;null==a.hx__closures__?a.hx__closures__={}:b=a.hx__closures__[c.__id__];null==b&&(b=function(){return b.method.apply(b.scope,arguments)},b.scope=a,b.method=c,a.hx__closures__[c.__id__]=b);return b}U.xxx=U.xxx||{};var G=function(a,c){this.r=new RegExp(a,c.split("u").join(""))};
G.__name__=["EReg"];G.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new l("EReg::matched");},__class__:G};var h=function(){};h.__name__=["HxOverrides"];h.cca=function(a,c){var b=a.charCodeAt(c);return b!=b?void 0:b};h.substr=function(a,c,b){if(null==b)b=a.length;else if(0>b)if(0==c)b=a.length+b;else return"";return a.substr(c,b)};h.remove=
function(a,c){var b=a.indexOf(c);if(-1==b)return!1;a.splice(b,1);return!0};h.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};Math.__name__=["Math"];var w=function(){};w.__name__=["Std"];w.string=function(a){return v.__string_rec(a,"")};w.parseInt=function(a){var c=parseInt(a,10);0!=c||120!=h.cca(a,1)&&88!=h.cca(a,1)||(c=parseInt(a));return isNaN(c)?null:c};var D=function(){this.b=""};D.__name__=["StringBuf"];D.prototype=
{__class__:D};var y=function(){};y.__name__=["StringTools"];y.isSpace=function(a,c){var b=h.cca(a,c);return 8<b&&14>b?!0:32==b};y.ltrim=function(a){for(var c=a.length,b=0;b<c&&y.isSpace(a,b);)++b;return 0<b?h.substr(a,b,c-b):a};y.rtrim=function(a){for(var c=a.length,b=0;b<c&&y.isSpace(a,c-b-1);)++b;return 0<b?h.substr(a,0,c-b):a};y.trim=function(a){return y.ltrim(y.rtrim(a))};y.replace=function(a,c,b){return a.split(c).join(b)};var V=function(){};V.__name__=["Type"];V.getClassName=function(a){a=a.__name__;
return null==a?null:a.join(".")};var e=function(a){this.nodeType=a;this.children=[];this.attributeMap=new H};e.__name__=["Xml"];e.parse=function(a){return C.parse(a)};e.createElement=function(a){var c=new e(e.Element);if(c.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+c.nodeType);c.nodeName=a;return c};e.createPCData=function(a){var c=new e(e.PCData);if(c.nodeType==e.Document||c.nodeType==e.Element)throw new l("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};
e.createCData=function(a){var c=new e(e.CData);if(c.nodeType==e.Document||c.nodeType==e.Element)throw new l("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};e.createComment=function(a){var c=new e(e.Comment);if(c.nodeType==e.Document||c.nodeType==e.Element)throw new l("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};e.createDocType=function(a){var c=new e(e.DocType);if(c.nodeType==e.Document||c.nodeType==e.Element)throw new l("Bad node type, unexpected "+c.nodeType);
c.nodeValue=a;return c};e.createProcessingInstruction=function(a){var c=new e(e.ProcessingInstruction);if(c.nodeType==e.Document||c.nodeType==e.Element)throw new l("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};e.createDocument=function(){return new e(e.Document)};e.prototype={get:function(a){if(this.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+this.nodeType);var c=this.attributeMap;return null!=B[a]?c.getReserved(a):c.h[a]},set:function(a,c){if(this.nodeType!=
e.Element)throw new l("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;null!=B[a]?b.setReserved(a,c):b.h[a]=c},exists:function(a){if(this.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+this.nodeType);var c=this.attributeMap;return null!=B[a]?c.existsReserved(a):c.h.hasOwnProperty(a)},elements:function(){if(this.nodeType!=e.Document&&this.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+this.nodeType);
for(var a=[],c=0,b=this.children;c<b.length;){var m=b[c];++c;m.nodeType==e.Element&&a.push(m)}return h.iter(a)},firstElement:function(){if(this.nodeType!=e.Document&&this.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=0,c=this.children;a<c.length;){var b=c[a];++a;if(b.nodeType==e.Element)return b}return null},addChild:function(a){if(this.nodeType!=e.Document&&this.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+
this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=e.Document&&this.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+this.nodeType);return h.remove(this.children,a)?(a.parent=null,!0):!1},__class__:e};var da=require("atom").CompositeDisposable,M=function(){};M.__name__=["atom","Disposable"];M.prototype={__class__:M};var N=require("atom").Emitter,X=require("atom").File,ea=require("atom").Point,
Y=require("atom").Range,Z=function(){};Z.__name__=["haxe","IMap"];var I=function(a){var c=this;this.id=setInterval(function(){c.run()},a)};I.__name__=["haxe","Timer"];I.delay=function(a,c){var b=new I(c);b.run=function(){b.stop();a()};return b};I.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:I};var H=function(){this.h={}};H.__name__=["haxe","ds","StringMap"];H.__interfaces__=[Z];H.prototype={setReserved:function(a,c){null==this.rh&&(this.rh=
{});this.rh["$"+a]=c},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},__class__:H};var z=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var c=a.lastIndexOf("/"),b=a.lastIndexOf("\\");c<b?(this.dir=h.substr(a,0,b),a=h.substr(a,b+1,null),this.backslash=!0):b<c?(this.dir=h.substr(a,0,c),a=h.substr(a,c+1,null)):this.dir=null;c=a.lastIndexOf(".");-1!=c?(this.ext=h.substr(a,c+1,null),
this.file=h.substr(a,0,c)):(this.ext=null,this.file=a)};z.__name__=["haxe","io","Path"];z.withoutExtension=function(a){a=new z(a);a.ext=null;return a.toString()};z.extension=function(a){a=new z(a);return null==a.ext?"":a.ext};z.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:z};var t=function(a,c,b){this.xml=c;this.message=a;this.position=b;this.lineNumber=1;for(a=this.positionAtLine=0;a<b;){var m=c.charCodeAt(a++);
10==m?(this.lineNumber++,this.positionAtLine=0):13!=m&&this.positionAtLine++}};t.__name__=["haxe","xml","XmlParserException"];t.prototype={toString:function(){return V.getClassName(v.getClass(this))+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:t};var C=function(){};C.__name__=["haxe","xml","Parser"];C.parse=function(a,c){null==c&&(c=!1);var b=e.createDocument();C.doParse(a,c,0,b);return b};C.doParse=function(a,c,b,m){null==b&&(b=0);for(var x=null,n=1,d=1,p=
null,g=0,q=0,u=0,f=a.charCodeAt(b),k=new D,r=1,v=-1;f==f;){switch(n){case 0:switch(f){case 9:case 10:case 13:case 32:break;default:n=d;continue}break;case 1:if(60==f)n=0,d=2;else{g=b;n=13;continue}break;case 2:switch(f){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=h.substr(a,b,6).toUpperCase())throw new l(new t("Expected <![CDATA[",a,b));b+=5;n=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=h.substr(a,b+2,6).toUpperCase())throw new l(new t("Expected <!DOCTYPE",a,b));
b+=8;n=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw new l(new t("Expected \x3c!--",a,b));b+=2;n=15}g=b+1;break;case 47:if(null==m)throw new l(new t("Expected node name",a,b));g=b+1;n=0;d=10;break;case 63:n=14;g=b;break;default:n=3;g=b;continue}break;case 3:if(!(97<=f&&122>=f||65<=f&&90>=f||48<=f&&57>=f||58==f||46==f||95==f||45==f)){if(b==g)throw new l(new t("Expected node name",a,b));x=e.createElement(h.substr(a,g,b-g));m.addChild(x);++q;n=0;d=4;continue}break;case 4:switch(f){case 47:n=
11;break;case 62:n=9;break;default:n=5;g=b;continue}break;case 5:if(!(97<=f&&122>=f||65<=f&&90>=f||48<=f&&57>=f||58==f||46==f||95==f||45==f)){if(g==b)throw new l(new t("Expected attribute name",a,b));p=d=h.substr(a,g,b-g);if(x.exists(d))throw new l(new t("Duplicate attribute ["+d+"]",a,b));n=0;d=6;continue}break;case 6:if(61==f)n=0,d=7;else throw new l(new t("Expected =",a,b));break;case 7:switch(f){case 34:case 39:k=new D;n=8;g=b+1;v=f;break;default:throw new l(new t('Expected "',a,b));}break;case 8:switch(f){case 38:r=
b-g;k.b+=null==r?h.substr(a,g,null):h.substr(a,g,r);n=18;r=8;g=b+1;break;case 60:case 62:if(c)throw new l(new t("Invalid unescaped "+String.fromCharCode(f)+" in attribute value",a,b));f==v&&(d=b-g,k.b+=null==d?h.substr(a,g,null):h.substr(a,g,d),d=k.b,k=new D,x.set(p,d),n=0,d=4);break;default:f==v&&(d=b-g,k.b+=null==d?h.substr(a,g,null):h.substr(a,g,d),d=k.b,k=new D,x.set(p,d),n=0,d=4)}break;case 9:g=b=C.doParse(a,c,b,x);n=1;break;case 10:if(!(97<=f&&122>=f||65<=f&&90>=f||48<=f&&57>=f||58==f||46==
f||95==f||45==f)){if(g==b)throw new l(new t("Expected node name",a,b));d=h.substr(a,g,b-g);if(m.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+m.nodeType);if(d!=m.nodeName){if(m.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+m.nodeType);throw new l(new t("Expected </"+m.nodeName+">",a,b));}n=0;d=12;continue}break;case 11:if(62==f)n=1;else throw new l(new t("Expected >",a,b));break;case 12:if(62==f)return 0==q&&m.addChild(e.createPCData("")),
b;throw new l(new t("Expected >",a,b));case 13:60==f?(d=b-g,k.b+=null==d?h.substr(a,g,null):h.substr(a,g,d),d=e.createPCData(k.b),k=new D,m.addChild(d),++q,n=0,d=2):38==f&&(r=b-g,k.b+=null==r?h.substr(a,g,null):h.substr(a,g,r),n=18,r=13,g=b+1);break;case 14:63==f&&62==a.charCodeAt(b+1)&&(++b,m.addChild(e.createProcessingInstruction(h.substr(a,g+1,b-g-2))),++q,n=1);break;case 15:45==f&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(m.addChild(e.createComment(h.substr(a,g,b-g))),++q,b+=2,n=1);break;
case 16:91==f?++u:93==f?--u:62==f&&0==u&&(m.addChild(e.createDocType(h.substr(a,g,b-g))),++q,n=1);break;case 17:93==f&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(m.addChild(e.createCData(h.substr(a,g,b-g))),++q,b+=2,n=1);break;case 18:if(59==f){g=h.substr(a,g,b-g);if(35==g.charCodeAt(0))g=120==g.charCodeAt(1)?w.parseInt("0"+h.substr(g,1,g.length-1)):w.parseInt(h.substr(g,1,g.length-1)),k.b+=String.fromCharCode(g);else if(f=C.escapes,null!=B[g]?f.existsReserved(g):f.h.hasOwnProperty(g))f=C.escapes,
k.b+=w.string(null!=B[g]?f.getReserved(g):f.h[g]);else{if(c)throw new l(new t("Undefined entity: "+g,a,b));k.b+=w.string("&"+g+";")}g=b+1;n=r}else if(!(97<=f&&122>=f||65<=f&&90>=f||48<=f&&57>=f||58==f||46==f||95==f||45==f)&&35!=f){if(c)throw new l(new t("Invalid character in entity: "+String.fromCharCode(f),a,b));k.b+="&";f=b-g;k.b+=null==f?h.substr(a,g,null):h.substr(a,g,f);g=b--;n=r}}f=a.charCodeAt(++b)}1==n&&(g=b,n=13);if(13==n){if(b!=g||0==q)c=b-g,k.b+=null==c?h.substr(a,g,null):h.substr(a,g,
c),m.addChild(e.createPCData(k.b));return b}if(!c&&18==n&&13==r)return k.b+="&",c=b-g,k.b+=null==c?h.substr(a,g,null):h.substr(a,g,c),m.addChild(e.createPCData(k.b)),b;throw new l(new t("Unexpected end",a,b));};var l=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,l)};l.__name__=["js","_Boot","HaxeError"];l.wrap=function(a){return a instanceof Error?a:new l(a)};l.__super__=Error;l.prototype=W(Error.prototype,{__class__:l});var v=
function(){};v.__name__=["js","Boot"];v.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var c=a.__class__;if(null!=c)return c;a=v.__nativeClassName(a);return null!=a?v.__resolveNativeClass(a):null};v.__string_rec=function(a,c){if(null==a)return"null";if(5<=c.length)return"<...>";var b=typeof a;"function"==b&&(a.__name__||a.__ename__)&&(b="object");switch(b){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];b=
a[0]+"(";c+="\t";for(var m=2,d=a.length;m<d;)var e=m++,b=2!=e?b+(","+v.__string_rec(a[e],c)):b+v.__string_rec(a[e],c);return b+")"}b=a.length;m="[";c+="\t";for(d=0;d<b;)e=d++,m+=(0<e?",":"")+v.__string_rec(a[e],c);return m+"]"}try{m=a.toString}catch(l){return"???"}if(null!=m&&m!=Object.toString&&"function"==typeof m&&(b=a.toString(),"[object Object]"!=b))return b;b=null;m="{\n";c+="\t";d=null!=a.hasOwnProperty;for(b in a)d&&!a.hasOwnProperty(b)||"prototype"==b||"__class__"==b||"__super__"==b||"__interfaces__"==
b||"__properties__"==b||(2!=m.length&&(m+=", \n"),m+=c+b+" : "+v.__string_rec(a[b],c));c=c.substring(1);return m+("\n"+c+"}");case "string":return a;default:return String(a)}};v.__nativeClassName=function(a){a=v.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};v.__resolveNativeClass=function(a){return ba[a]};var fa=require("child_process"),aa=require("fs"),ga=require("path"),E=require("buffer").Buffer,p=function(){};p.__name__=["om","haxe","ErrorMessage"];
p.parse=function(a){if(p.PATTERN.match(a)){a=new p;a.path=p.PATTERN.matched(1);a.line=w.parseInt(p.PATTERN.matched(2));switch(p.PATTERN.matched(3)){case "character":a.character=w.parseInt(p.PATTERN.matched(4));a.content=p.PATTERN.matched(7);break;case "characters":a.characters={start:w.parseInt(p.PATTERN.matched(4)),end:w.parseInt(p.PATTERN.matched(6))};a.content=p.PATTERN.matched(7);break;case "lines":a.lines={start:w.parseInt(p.PATTERN.matched(4)),end:w.parseInt(p.PATTERN.matched(6))},a.content=
p.PATTERN.matched(7)}return a}return null};p.prototype={__class__:p};var J=function(){};J.__name__=["om","haxe","SourceCodeUtil"];var O=function(a){this.editor=a};O.__name__=["xxx","AutoComplete"];O.prototype={query:function(a,c,b,m,x){null==a&&(a=this.editor.getCursorBufferPosition());a=this.editor.getTextInBufferRange(new Y(new ea(0,0),a)).length;a=this.editor.getPath()+"@"+a;null!=c&&(a+="@"+c);c=[d.hxml.getPath(),"--display",a];d.server.query(c,this.editor.getText(),function(a){},function(a){a=
e.parse(a).firstElement();m(a)},function(a){})},__class__:O};var P=function(){this.excludeLowerPriority=!1;this.inclusionPriority=2;this.prefixes=[".","("];this.disableForSelector=".source.haxe .comment, .source.hx .comment";this.selector=".source.haxe, .source.hx"};P.__name__=["xxx","AutoCompleteProvider"];P.prototype={dispose:function(){},getSuggestions:function(a){return new Promise(function(c,b){if(null==d.hxml)c(null);else{var m=new O(a.editor);switch(a.prefix){case "(":m.query(null,null,null,
function(a){if(null==a)c(null);else{if(a.nodeType!=e.Document&&a.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+a.nodeType);a=a.children[0];if(a.nodeType==e.Document||a.nodeType==e.Element)throw new l("Bad node type, unexpected "+a.nodeType);a=y.trim(a.nodeValue);a.split("->").pop();c([{type:"variable",snippet:""+a+"$0",displayText:""+a}])}});break;case ".":if(J.ENDS_WITH_DOT_NUMBER.match("line")){c(null);break}m.query(null,null,null,function(b){if(null==
b)c(null);else{var d=a.editor.lineTextForBufferRow(a.bufferPosition.row);if(J.IMPORT_DECL.match(d)){var d=J.IMPORT_DECL.matched(1),m=[];for(b=b.elements();b.hasNext();){for(var h=b.next(),g=h.get("n"),q=null,u=null,f=h.elements();f.hasNext();){var k=f.next();if(k.nodeType!=e.Document&&k.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+k.nodeType);var r=k.children[0];if(null!=r){if(k.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+
k.nodeType);switch(k.nodeName){case "d":if(r.nodeType==e.Document||r.nodeType==e.Element)throw new l("Bad node type, unexpected "+r.nodeType);u=r.nodeValue;break;case "t":if(r.nodeType==e.Document||r.nodeType==e.Element)throw new l("Bad node type, unexpected "+r.nodeType);q=r.nodeValue}}}u={text:g,description:u};switch(h.get("k")){case "method":u.type="method";u.displayText=g;h=q.split(" -> ");g=h.pop();if("Void"==h[0])u.displayText+="() : "+g;else{q=1;f=[];for(k=0;k<h.length;)r=h[k],++k,f.push("${"+
q+":"+r.split(" : ")[0]+"}"),++q;f.join(", ");u.displayText+="( "+h.join(", ")+" ) : "+g}break;case "package":u.iconHTML='<i class="icon-package"></i>';u.displayText=d+"."+u.text;break;case "type":u.type="type";u.displayText=d+"."+g;break;case "var":u.type="variable",u.displayText=g+" : "+q}m.push(u)}c(m)}else{d=[];for(m=b.elements();m.hasNext();){q=m.next();b=q.get("n");u="var"==q.get("k");g=h=f=null;for(g=q.elements();g.hasNext();){q=g.next();if(q.nodeType!=e.Document&&q.nodeType!=e.Element)throw new l("Bad node type, expected Element or Document but found "+
q.nodeType);k=q.children[0];if(null!=k){if(q.nodeType!=e.Element)throw new l("Bad node type, expected Element but found "+q.nodeType);switch(q.nodeName){case "d":if(k.nodeType==e.Document||k.nodeType==e.Element)throw new l("Bad node type, unexpected "+k.nodeType);h=k.nodeValue;break;case "t":if(k.nodeType==e.Document||k.nodeType==e.Element)throw new l("Bad node type, unexpected "+k.nodeType);f=k.nodeValue}}}g=q=b;if(u)g=b+(" : "+f);else if(f=f.split(" -> "),g=f.pop(),"Void"==f[0])q=b+"()$0",g=b+"()";
else{for(var q=b+"( ",k=1,r=[],p=0;p<f.length;){var t=f[p];++p;r.push("${"+k+":"+t.split(" : ")[0]+"}");++k}q+=r.join(", ")+" )$0";g=b+("( "+f.join(", ")+" ) : "+g)}d.push({type:u?"variable":"method",snippet:q,displayText:g,description:h})}c(d)}}});break;default:c(null)}}})},__class__:P};var L=function(a){N.call(this);this.hxml=a};L.__name__=["xxx","Build"];L.__super__=N;L.prototype=W(N.prototype,{start:function(a){null==a&&(a=!1);var c=this,b=["--cwd",this.hxml.getParent().getPath()];a&&b.push("-v");
b.push(this.hxml.getBaseName());d.server.query(b,null,function(a){c.emit("message",a)},function(a){c.emit("end",0)},function(a){a=y.trim(a);c.emit("error",a);c.emit("end")});this.emit("start")},__class__:L});var Q=function(a,c){null==c&&(c=!0);null==a&&(a="haxe");this.haxePath=a;this.verbose=c};Q.__name__=["xxx","HaxeServer"];Q.prototype={start:function(){this.stop();this.buffer=new R;this.nextMessageLength=-1;this.proc=fa.spawn(this.haxePath,["-v","--wait","stdio"]);this.proc.on("exit",K(this,this.handleExit));
this.proc.stderr.on("data",K(this,this.handleData));this.proc.stdout.on("data",function(a){})},stop:function(){if(null!=this.proc){this.proc.removeAllListeners();try{this.proc.kill()}catch(c){}this.proc=null}for(var a=this.requestsHead;null!=a;)a.processResult(null),a=a.next;this.requestsHead=this.requestsTail=this.currentRequest=null},query:function(a,c,b,d,e){a=new S(a,c,b,d,e);null==this.requestsHead?this.requestsHead=this.requestsTail=a:(this.requestsTail.next=a,a.prev=this.requestsTail,this.requestsTail=
a);this.checkQueue()},checkQueue:function(){null==this.currentRequest&&null!=this.requestsHead&&(this.currentRequest=this.requestsHead,this.requestsHead=this.currentRequest.next,this.proc.stdin.write(this.currentRequest.prepareBody()))},handleData:function(a){for(this.buffer.append(a);;){if(-1==this.nextMessageLength){a=this.buffer.tryReadLength();if(-1==a)break;this.nextMessageLength=a}a=this.buffer.tryReadContent(this.nextMessageLength);if(null==a)break;this.nextMessageLength=-1;if(null!=this.currentRequest){var c=
this.currentRequest;this.currentRequest=null;c.processResult(a);this.checkQueue()}}},handleExit:function(a,c){},__class__:Q};var R=function(a){null==a&&(a=8192);this.size=a;this.buffer=new E(a);this.index=0};R.__name__=["xxx","_HaxeServer","MessageBuffer"];R.prototype={append:function(a){if(this.buffer.length-this.index>=a.length)a.copy(this.buffer,this.index,0,a.length);else{var c=(Math.ceil((this.index+a.length)/this.size)+1)*this.size;0==this.index?(this.buffer=new E(c),a.copy(this.buffer,0,0,
a.length)):this.buffer=E.concat([this.buffer.slice(0,this.index),a],c)}this.index+=a.length},tryReadLength:function(){if(4>this.index)return-1;var a=this.buffer.readInt32LE(0);this.buffer=this.buffer.slice(4);this.index-=4;return a},tryReadContent:function(a){if(this.index<a)return null;var c=this.buffer.toString("utf-8",0,a);this.buffer.copy(this.buffer,0,a);this.index-=a;return c},__class__:R};var S=function(a,c,b,d,e){this.args=a;this.stdin=c;this.onMessage=b;this.onResult=d;this.onError=e};S.__name__=
["xxx","_HaxeServer","Request"];S.prototype={prepareBody:function(){null!=this.stdin&&(this.args=this.args.concat(["-D","display-stdin"]));for(var a=new E(4),c=[a],b=0,d=0,e=this.args;d<e.length;){var h=e[d];++d;h=new E(""+h+"\n");c.push(h);b+=h.length}null!=this.stdin&&(d=new E([1]),c.push(d),e=new E(this.stdin),c.push(e),b+=e.length+d.length);a.writeInt32LE(b,0);return E.concat(c,b+4)},processResult:function(a){if(null==a)this.onResult(null);else{var c="",b=!1,d=0;for(a=a.split("\n");d<a.length;){var e=
a[d];++d;switch(e.charCodeAt(0)){case 1:e=y.replace(e.substring(1),"\u0001","\n");this.onMessage(e);break;case 2:b=!0;break;default:c+=null==e?"null":""+e,c+="\n"}}c=y.trim(c);if(b)this.onError(c);else this.onResult(c)}},__class__:S};var d=U.xxx.IDE=function(){};d.__name__=["xxx","IDE"];d.activate=function(a){d.disposables=new da;d.disposables.add(d.emitter=new N);d.statusbar=new F;d.server=new Q;I.delay(function(){d.server.start();d.disposables.add(atom.commands.add("atom-workspace","xxx:build",
function(a){a=d.getTreeViewFile();null!=a&&"hxml"==z.extension(a)&&null!=d.hxml&&a!=d.hxml.getPath()&&d.selectHxml(a);d.build()}))},atom.config.get("xxx.haxe_server_startdelay"));d.searchHxmlFiles(null,null,function(c){d.hxmlFiles=c;null!=a&&null!=a.hxml?-1!=d.hxmlFiles.indexOf(a.hxml)&&d.selectHxml(a.hxml):d.selectHxml(c[0]);atom.workspace.observeTextEditors(function(a){if("hx"==z.extension(a.getPath()))a.onDidChange(function(a){})})})};d.serialize=function(){return{hxml:null!=d.hxml?d.hxml.getPath():
null}};d.deactivate=function(){d.disposables.dispose();d.server.stop()};d.onSelectHxml=function(a){return d.emitter.on("hxml_select",a)};d.onBuild=function(a){return d.emitter.on("build",a)};d.selectHxml=function(a){if(null==a)d.hxml=null;else{if(null!=d.hxml&&a==d.hxml.getPath())return;d.hxml=new X(a)}d.emitter.emit("hxml_select",d.hxml)};d.build=function(){if(null==d.hxml)return atom.notifications.addWarning("No hxml file selected"),null;var a=new L(d.hxml);new A(a);d.emitter.emit("build",a);a.start();
return a};d.searchHxmlFiles=function(a,c,b){null==c&&(c=5);null==a&&(a=atom.project.getPaths());for(var d=function(a,b,e){null==e&&(e=0);var f=[];aa.readdir(a,function(h,l){var n=l.length;if(0==n)b(f);else for(var x=0;x<l.length;){var p=[l[x]];++x;var t=ga.resolve(a,p[0]);p[0]=t;aa.stat(p[0],function(a){return function(g,h){if(null!=h&&h.isDirectory())if(e<c){var k=a[0],l=function(){return function(a){f=f.concat(a);0==--n&&b(f)}}();d(k,l,e+1)}else 0==--n&&b(f);else"hxml"==z.extension(a[0])&&f.push(a[0]),
0==--n&&b(f)}}(p))}})},e=[],h=0,l=0;l<a.length;){var p=a[l];++l;d(p,function(c){e=e.concat(c);(h+=1)==a.length&&b(e)})}};d.getTreeViewFile=function(a){var c=atom.packages.getLoadedPackage("tree-view").serialize().selectedPath;return null==a||null!=c&&z.extension(c)==a?c:null};d.getConfig=function(a){return atom.config.get("xxx."+a)};d.consumeStatusBar=function(a){a.addLeftTile({item:d.statusbar.element,priority:-100})};d.provideAutoCompletion=function(){return new P};d.provideService=function(){return{getHxml:function(){return d.hxml},
selectHxml:d.selectHxml,build:d.build}};var T=function(a,c){this.error=c;this.element=window.document.createElement("li");this.element.classList.add("message","error");var b=window.document.createElement("i");b.textContent=w.string(a+1);this.element.appendChild(b);b=window.document.createElement("span");b.classList.add("path");b.textContent=c.path;this.element.appendChild(b);b=window.document.createElement("span");b.classList.add("line");b.textContent=null==c.line?"null":""+c.line;this.element.appendChild(b);
null!=c.characters&&(b=window.document.createElement("span"),b.classList.add("start"),b.textContent=w.string(c.characters.start),this.element.appendChild(b),b=window.document.createElement("span"),b.classList.add("end"),b.textContent=w.string(c.characters.end),this.element.appendChild(b));b=window.document.createElement("span");b.classList.add("content");b.textContent=c.content;this.element.appendChild(b)};T.__name__=["xxx","view","_BuildView","ErrorMessageView"];T.prototype={select:function(){this.element.classList.add("selected")},
__class__:T};var A=function(a){var c=this;null!=A.current&&A.current.destroy();A.current=this;this.element=window.document.createElement("div");this.element.classList.add("xxx-build","resizer");this.messages=window.document.createElement("ol");this.messages.classList.add("messages","scroller");this.element.appendChild(this.messages);this.panel=atom.workspace.addBottomPanel({item:this.element,visible:!0});var b=[];a.on("start",function(){b=[]});a.on("message",function(a){c.log(a)});a.on("error",function(a){var d=
p.parse(a);if(null==d)c.log(a,"error");else{b.push(d);var e=new T(c.messages.children.length,d);e.element.onclick=function(){e.select();A.openErrorPosition(d)};c.messages.appendChild(e.element)}});a.on("end",function(d){0==d?0==c.messages.children.length&&c.panel.hide():0<b.length&&(d=b[0],new X(d.path),d.path=atom.project.relativizePath(a.hxml.getPath())[0]+"/"+d.path,A.openErrorPosition(d))})};A.__name__=["xxx","view","BuildView"];A.openPosition=function(a,c,b,d,e,h){null==e&&(e=!0);null==d&&(d=
!0);atom.workspace.open(a,{initialLine:c,initialColumn:b,activatePane:d,searchAllPanes:e}).then(function(a){null!=h&&h(a)})};A.openErrorPosition=function(a){var c=a.line-1;A.openPosition(a.path,c,a.character,null,null,function(b){null!=a.characters&&b.setSelectedBufferRange(new Y([c,a.characters.start],[c,a.characters.end]));b.scrollToCursorPosition()})};A.prototype={destroy:function(){this.panel.destroy()},log:function(a,c){var b=window.document.createElement("li");b.classList.add("message");null!=
c&&b.classList.add(c);b.textContent=a;this.messages.appendChild(b)},__class__:A};var F=function(){var a=this;this.element=window.document.createElement("div");this.element.classList.add("status-bar-xxx","inline-block");this.icon=window.document.createElement("span");this.icon.classList.add("icon-haxe");this.element.appendChild(this.icon);this.info=window.document.createElement("a");this.info.classList.add("info");this.element.appendChild(this.info);this.meta=window.document.createElement("span");
this.meta.classList.add("meta");this.element.appendChild(this.meta);d.emitter.on("hxml_select",K(this,this.changeHxml));d.emitter.on("build",function(c){var b=null,d=0;c.on("start",function(){var c=process.hrtime();b=(1E9*c[0]+c[1])/1E6;a.changeStatus("active")});c.on("message",function(a){});c.on("error",function(b){d+=1;a.changeStatus("error")});c.on("end",function(c){if(0==c){a.changeStatus("success");c=process.hrtime();c=((1E9*c[0]+c[1])/1E6-b)/1E3;c=null==c?"null":""+c;var e=c.indexOf(".");c=
c.substring(0,e)+c.substring(e,3);a.meta.textContent=c+"s"}else a.changeStatus("error"),a.meta.textContent="("+d+")"})});this.info.addEventListener("click",K(this,this.handleClickInfo),!1)};F.__name__=["xxx","view","StatusbarView"];F.__interfaces__=[M];F.getRelativePath=function(a){a=atom.project.relativizePath(a);var c=a[0].split("/");return c[c.length-1]+"/"+a[1]};F.prototype={dispose:function(){this.info.removeEventListener("click",K(this,this.handleClickInfo));null!=this.contextMenu&&this.contextMenu.dispose()},
changeHxml:function(a){null==a?(this.icon.style.display="none",this.info.textContent=""):(this.icon.style.display="inline-block",a=F.getRelativePath(a.getPath()),this.info.textContent=z.withoutExtension(a));this.meta.textContent="";this.buildContextMenu()},changeStatus:function(a){a!=this.status&&(null!=this.status&&(this.icon.classList.remove(this.status),this.info.classList.remove(this.status)),this.status=a,null!=a&&(this.icon.classList.add(a),this.info.classList.add(a)))},buildContextMenu:function(){null!=
this.contextMenu&&this.contextMenu.dispose();var a=[];null!=d.hxml&&(a.push({label:"Build",command:"xxx:build"}),a.push({type:"separator"}));for(var c=0,b=d.hxmlFiles;c<b.length;){var e=b[c];++c;null!=d.hxml&&d.hxml.getPath()==e||a.push({label:F.getRelativePath(e),command:"xxx:select-hxml"})}this.contextMenu=atom.contextMenu.add({".status-bar-xxx .info":a})},handleClickInfo:function(a){a.ctrlKey?d.build():null!=d.hxml&&atom.workspace.open(d.hxml.getPath())},__class__:F};var ca=0;String.prototype.__class__=
String;String.__name__=["String"];Array.__name__=["Array"];var B={};module.exports=d;e.Element=0;e.PCData=1;e.CData=2;e.Comment=3;e.DocType=4;e.ProcessingInstruction=5;e.Document=6;C.escapes=function(a){a=new H;null!=B.lt?a.setReserved("lt","<"):a.h.lt="<";null!=B.gt?a.setReserved("gt",">"):a.h.gt=">";null!=B.amp?a.setReserved("amp","&"):a.h.amp="&";null!=B.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=B.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);v.__toStr={}.toString;p.PATTERN=
new G("^\\s*(.+):([0-9]+):\\s*(characters*|lines)\\s([0-9]+)(-([0-9]+))?\\s:\\s(.+)$","i");J.ENDS_WITH_DOT_NUMBER=new G("[^a-zA-Z0-9_\\]\\)]([\\.0-9]+)$","");J.IMPORT_DECL=new G("import\\s*([a-zA-Z0-9_]+(?:\\.[a-zA-Z0-9_]+)*)(?:\\s+(?:in|as)\\s+([a-zA-Z0-9_]+))?","g");d.EVENT_SELECT_HXML="hxml_select";d.EVENT_BUILD="build"})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=
typeof self?self:this);
