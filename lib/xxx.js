var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,h,k){c!=Array.prototype&&c!=Object.prototype&&(c[h]=k.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var h=0;return $jscomp.iteratorPrototype(function(){return h<c.length?{done:!1,value:c[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,h){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var k=0,m={next:function(){if(k<c.length){var g=k++;return{value:h(g,c[g]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(c,h,k,m){if(h){k=$jscomp.global;c=c.split(".");for(m=0;m<c.length-1;m++){var g=c[m];g in k||(k[g]={});k=k[g]}c=c[c.length-1];m=k[c];h=h(m);h!=m&&null!=h&&$jscomp.defineProperty(k,c,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.checkStringArgs=function(c,h,k){if(null==c)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(c,k){var h=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===k&&(k=h.length);k=Math.max(0,Math.min(k|0,h.length));for(var g=c.length;0<g&&0<k;)if(h[--k]!=c[--g])return!1;return 0>=g}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var h=c[Symbol.iterator];return h?h.call(c):$jscomp.arrayIterator(c)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function h(){this.batch_=null}function k(f){return f instanceof g?f:new g(function(c,g){c(f)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;h.prototype.asyncExecute=function(f){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(f);return this};h.prototype.asyncExecuteBatch_=function(){var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})};var m=$jscomp.global.setTimeout;h.prototype.asyncExecuteFunction=function(f){m(f,
0)};h.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=this.batch_;this.batch_=[];for(var c=0;c<f.length;++c){var g=f[c];delete f[c];try{g()}catch(A){this.asyncThrow_(A)}}}this.batch_=null};h.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var g=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{f(c.resolve,c.reject)}catch(w){c.reject(w)}};g.prototype.createResolveAndReject_=
function(){function f(f){return function(k){g||(g=!0,f.call(c,k))}}var c=this,g=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};g.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof g)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var c=null!=f;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};g.prototype.resolveToNonPromiseObj_=function(f){var c=
void 0;try{c=f.then}catch(w){this.reject_(w);return}"function"==typeof c?this.settleSameAsThenable_(c,f):this.fulfill_(f)};g.prototype.reject_=function(f){this.settle_(2,f)};g.prototype.fulfill_=function(f){this.settle_(1,f)};g.prototype.settle_=function(f,c){if(0!=this.state_)throw Error("Cannot settle("+f+", "+c|"): Promise already settled in state"+this.state_);this.state_=f;this.result_=c;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=
this.onSettledCallbacks_,c=0;c<f.length;++c)f[c].call(),f[c]=null;this.onSettledCallbacks_=null}};var n=new h;g.prototype.settleSameAsPromise_=function(c){var f=this.createResolveAndReject_();c.callWhenSettled_(f.resolve,f.reject)};g.prototype.settleSameAsThenable_=function(c,g){var f=this.createResolveAndReject_();try{c.call(g,f.resolve,f.reject)}catch(A){f.reject(A)}};g.prototype.then=function(c,k){function f(c,f){return"function"==typeof c?function(f){try{h(c(f))}catch(B){m(B)}}:f}var h,m,n=new g(function(c,
f){h=c;m=f});this.callWhenSettled_(f(c,h),f(k,m));return n};g.prototype.catch=function(c){return this.then(void 0,c)};g.prototype.callWhenSettled_=function(c,g){function f(){switch(k.state_){case 1:c(k.result_);break;case 2:g(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=this;null==this.onSettledCallbacks_?n.asyncExecute(f):this.onSettledCallbacks_.push(function(){n.asyncExecute(f)})};g.resolve=k;g.reject=function(c){return new g(function(f,g){g(c)})};g.race=function(c){return new g(function(f,
g){for(var h=$jscomp.makeIterator(c),m=h.next();!m.done;m=h.next())k(m.value).callWhenSettled_(f,g)})};g.all=function(c){var f=$jscomp.makeIterator(c),h=f.next();return h.done?k([]):new g(function(c,g){function m(f){return function(g){n[f]=g;u--;0==u&&c(n)}}var n=[],u=0;do n.push(void 0),u++,k(h.value).callWhenSettled_(m(n.length-1),g),h=f.next();while(!h.done)})};return g},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(c,k){var h=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var g=h.length,n=c.length;k=Math.max(0,Math.min(k|0,h.length));for(var f=0;f<n&&k<g;)if(h[k++]!=c[f++])return!1;return f>=n}},"es6","es3");
(function(c){function h(a,b){function e(){}e.prototype=a;a=new e;for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function k(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=S++);var e;null==a.hx__closures__?a.hx__closures__={}:e=a.hx__closures__[b.__id__];null==e&&(e=function(){return e.method.apply(e.scope,arguments)},e.scope=a,e.method=b,a.hx__closures__[b.__id__]=e);return e}c.xxx=c.xxx||{};var m=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};
m.__name__=!0;m.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new y("EReg::matched");}};var g=function(){};g.__name__=!0;g.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};g.substr=function(a,b,e){if(null==e)e=a.length;else if(0>e)if(0==b)e=a.length+e;else return"";return a.substr(b,e)};Math.__name__=!0;var n=function(){};n.__name__=
!0;n.string=function(a){return z.__string_rec(a,"")};n.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=g.cca(a,1)&&88!=g.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var f=function(){};f.__name__=!0;f.startsWith=function(a,b){return a.length>=b.length?g.substr(a,0,b.length)==b:!1};f.endsWith=function(a,b){var e=b.length,c=a.length;return c>=e?g.substr(a,c-e,e)==b:!1};f.isSpace=function(a,b){a=g.cca(a,b);return 8<a&&14>a?!0:32==a};f.ltrim=function(a){for(var b=a.length,e=0;e<b&&f.isSpace(a,
e);)++e;return 0<e?g.substr(a,e,b-e):a};f.rtrim=function(a){for(var b=a.length,e=0;e<b&&f.isSpace(a,b-e-1);)++e;return 0<e?g.substr(a,0,b-e):a};f.trim=function(a){return f.ltrim(f.rtrim(a))};f.replace=function(a,b,e){return a.split(b).join(e)};var P=require("atom").CompositeDisposable,w=require("atom").Emitter,A=require("atom").File,D=require("atom").Point,E=require("atom").Range,Q=function(){};Q.__name__=!0;var u=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};u.__name__=!0;u.delay=
function(a,b){var e=new u(b);e.run=function(){e.stop();a()};return e};u.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var G=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};G.__name__=!0;G.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=q[b]?a.getReserved(b):a.h[b]}};var B=function(){this.h={}};B.__name__=!0;B.__interfaces__=[Q];B.prototype={setReserved:function(a,
b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a}};var t=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),e=a.lastIndexOf("\\");b<e?(this.dir=
g.substr(a,0,e),a=g.substr(a,e+1,null),this.backslash=!0):e<b?(this.dir=g.substr(a,0,b),a=g.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=g.substr(a,b+1,null),this.file=g.substr(a,0,b)):(this.ext=null,this.file=a)};t.__name__=!0;t.withoutExtension=function(a){a=new t(a);a.ext=null;return a.toString()};t.withoutDirectory=function(a){a=new t(a);a.dir=null;return a.toString()};t.directory=function(a){a=new t(a);return null==a.dir?"":a.dir};t.extension=function(a){a=new t(a);
return null==a.ext?"":a.ext};t.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)}};var y=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,y)};y.__name__=!0;y.wrap=function(a){return a instanceof Error?a:new y(a)};y.__super__=Error;y.prototype=h(Error.prototype,{});var z=function(){};z.__name__=!0;z.__string_rec=function(a,b){if(null==a)return"null";
if(5<=b.length)return"<...>";var e=typeof a;"function"==e&&(a.__name__||a.__ename__)&&(e="object");switch(e){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];e=a[0]+"(";b+="\t";for(var c=2,f=a.length;c<f;){var d=c++;e=2!=d?e+(","+z.__string_rec(a[d],b)):e+z.__string_rec(a[d],b)}return e+")"}e=a.length;c="[";b+="\t";for(f=0;f<e;)d=f++,c+=(0<d?",":"")+z.__string_rec(a[d],b);return c+"]"}try{c=a.toString}catch(W){return"???"}if(null!=c&&
c!=Object.toString&&"function"==typeof c&&(e=a.toString(),"[object Object]"!=e))return e;e=null;c="{\n";b+="\t";f=null!=a.hasOwnProperty;for(e in a)f&&!a.hasOwnProperty(e)||"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+z.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case "string":return a;default:return String(a)}};var T=require("child_process"),R=require("fs"),U=require("path"),x=require("buffer").Buffer,
H=function(){};H.__name__=!0;H.equals=function(a,b,e){if(null==a||null==b||a.length!=b.length)return!1;for(var c=0,f=a.length;c<f;){var d=c++;if(!e(a[d],b[d]))return!1}return!0};var I=function(){};I.__name__=!0;I.parseFunType=function(a){var b={args:[],ret:""},e=a.split(":");if(1==e.length)a=e[0].split("->"),b.ret=g.substr(a[1],1,null);else{e=a.lastIndexOf("->");b.ret=g.substr(a,e+3,null);var c=a=g.substr(a,0,e-1),d=null;d=function(){var a=c.lastIndexOf(":"),e=g.substr(c,0,a-1),l=e.lastIndexOf(" ");
-1!=l&&(e=g.substr(e,l+1,null));l=g.substr(c,a+2,null);f.endsWith(l," -> ")&&(l=g.substr(l,0,l.length-4));c=g.substr(c,0,a-(e.length+1));b.args.unshift([e,l]);0<c.length&&d()};d()}return b};var r=function(){};r.__name__=!0;r.parse=function(a){if(r.EXPR.match(a)){a=new r;a.path=r.EXPR.matched(1);a.line=n.parseInt(r.EXPR.matched(2));switch(r.EXPR.matched(3)){case "character":a.character=n.parseInt(r.EXPR.matched(4));a.content=r.EXPR.matched(7);break;case "characters":a.characters={start:n.parseInt(r.EXPR.matched(4)),
end:n.parseInt(r.EXPR.matched(6))};a.content=r.EXPR.matched(7);break;case "lines":a.lines={start:n.parseInt(r.EXPR.matched(4)),end:n.parseInt(r.EXPR.matched(6))},a.content=r.EXPR.matched(7)}return a}return null};var J=function(a,b){null==b&&(b=!1);null==a&&(a="haxe");this.haxePath=a;this.verbose=b};J.__name__=!0;J.prototype={start:function(a,b){this.stop();this.buffer=new K;this.nextMessageLength=-1;this.proc=T.spawn(this.haxePath,["-v","--wait","stdio"]);this.proc.on("exit",k(this,this.handleExit));
this.proc.stderr.on("data",k(this,this.handleData));if(null!=b)this.proc.stdout.on("data",function(a){b(a.toString())});a(null)},stop:function(){if(null!=this.proc){this.proc.removeAllListeners();try{this.proc.kill()}catch(b){}this.proc=null}for(var a=this.requestsHead;null!=a;)a.processResult(null),a=a.next;this.requestsHead=this.requestsTail=this.currentRequest=null},query:function(a,b,e,c,f){a=new L(a,b,e,c,f);null==this.requestsHead?this.requestsHead=this.requestsTail=a:(this.requestsTail.next=
a,a.prev=this.requestsTail,this.requestsTail=a);this.checkQueue()},checkQueue:function(){null==this.currentRequest&&null!=this.requestsHead&&(this.currentRequest=this.requestsHead,this.requestsHead=this.currentRequest.next,this.proc.stdin.write(this.currentRequest.prepareBody()))},handleData:function(a){for(this.buffer.append(a);;){if(-1==this.nextMessageLength){a=this.buffer.tryReadLength();if(-1==a)break;this.nextMessageLength=a}a=this.buffer.tryReadContent(this.nextMessageLength);if(null==a)break;
this.nextMessageLength=-1;if(null!=this.currentRequest){var b=this.currentRequest;this.currentRequest=null;b.processResult(a);this.checkQueue()}}},handleExit:function(a,b){}};var K=function(a){null==a&&(a=8192);this.size=a;this.buffer=new x(a);this.index=0};K.__name__=!0;K.prototype={append:function(a){if(this.buffer.length-this.index>=a.length)a.copy(this.buffer,this.index,0,a.length);else{var b=(Math.ceil((this.index+a.length)/this.size)+1)*this.size|0;0==this.index?(this.buffer=new x(b),a.copy(this.buffer,
0,0,a.length)):this.buffer=x.concat([this.buffer.slice(0,this.index),a],b)}this.index+=a.length},tryReadLength:function(){if(4>this.index)return-1;var a=this.buffer.readInt32LE(0);this.buffer=this.buffer.slice(4);this.index-=4;return a},tryReadContent:function(a){if(this.index<a)return null;var b=this.buffer.toString("utf-8",0,a);this.buffer.copy(this.buffer,0,a);this.index-=a;return b}};var L=function(a,b,e,c,f){this.args=a;this.stdin=b;this.onResult=e;this.onError=c;this.onMessage=f};L.__name__=
!0;L.prototype={prepareBody:function(){null!=this.stdin&&(this.args=this.args.concat(["-D","display-stdin"]));for(var a=new x(4),b=[a],e=0,c=0,f=this.args;c<f.length;){var d=f[c];++c;d=new x(""+d+"\n");b.push(d);e+=d.length}null!=this.stdin&&(c=new x([1]),b.push(c),f=new x(this.stdin),b.push(f),e+=f.length+c.length);a.writeInt32LE(e,0);return x.concat(b,e+4)},processResult:function(a){if(null==a)this.onResult(null);else{var b="",e=!1,c=0;for(a=a.split("\n");c<a.length;){var d=a[c];++c;switch(d.charCodeAt(0)){case 1:d=
f.replace(d.substring(1),"\u0001","\n");if(null!=this.onMessage)this.onMessage(d);break;case 2:e=!0;break;case 65:if(null!=this.onMessage)this.onMessage(d);break;default:b+=null==d?"null":""+d,b+="\n"}}b=f.trim(b);if(e)this.onError(b);else this.onResult(b)}}};var p=function(){this.excludeLowerPriority=!1;this.disableForSelector=".source.hx .comment";this.selector=".source.hx";var a=this;this.enabled=atom.config.get("xxx.autocomplete").enabled;this.disposables=new P;this.disposables.add(atom.config.observe("xxx.autocomplete",
function(b){a.enabled=b.enabled}))};p.__name__=!0;p.createSuggestion=function(a,b){null==b&&(b=!0);var e={type:a.k,text:a.n,description:p.formatDoc(a.d)},c=a.k;if(null==c)e.text=a.t;else switch(c){case "literal":e.type="keyword";break;case "method":c=a.n+"(";var f=a.n+"(",d=I.parseFunType(a.t);e.rightLabel=d.ret;0<d.args.length&&(c+=" ",f+=" ");for(var g=[],h=[],k=0,V=d.args.length;k<V;){var m=k++,M=d.args[m];g.push(M[0]+" : "+M[1]);h.push("${"+(m+1)+":"+M[0]+"}")}c+=g.join(", ");f+=h.join(", ");
0<d.args.length&&(c+=" ",f+=" ");e.displayText=c+")";e.snippet=b?f+")$0":a.n;e.text=null;break;case "static":e.type="method";e.snippet=a.n+"()$0";e.displayText=a.n+"()";break;case "var":e.type="variable",e.rightLabel=a.t}return e};p.formatDoc=function(a){if(null==a)return"";a=f.trim(a);var b=[],c=0;for(a=a.split("\n");c<a.length;){var d=a[c];++c;b.push(f.trim(d))}return b.join("\n")};p.prototype={onError:function(a){},getSuggestions:function(a){var b=this;return(new Promise(function(c,d){if(b.enabled){d=
a.editor;d.getCursorBufferPosition();var e=a.bufferPosition,g=a.prefix,l="",h=d.getTextInBufferRange(new E(new D(e.row,0),e));p.EXPR_PREFIX_FIELD.match(h)?(g=".",l=p.EXPR_PREFIX_FIELD.matched(1),e.column-=l.length):p.EXPR_PREFIX_CALL.match(h)&&(g="(",l=p.EXPR_PREFIX_CALL.matched(1),e.column-=l.length);null==b.service?b.service=new N(d):b.service.editor=d;switch(g){case "(":b.service.callArgument(e).then(function(a){});break;case ".":if(p.EXPR_ALPHANUMERIC_END.match(h)){c([]);break}b.service.fieldAccess(e).then(function(a){for(var b=
[],e=p.EXPR_TYPEPATH.match(h),d=0;d<a.length;){var g=a[d];++d;0<l.length&&!f.startsWith(g.n,l)||e&&p.EXPR_TYPEPATH.matched(2).split(".").pop()==g.n||(g=p.createSuggestion(g,!e),b.push(g))}c(b)});break;default:b.service.topLevel(e).then(function(a){for(var b=new B,e=0;e<a.length;){var d=a[e];++e;var l=d.k;if(null==l)l=null;else switch(l){case "enum":case "enumabstract":case "literal":case "local":case "member":case "package":case "static":l=d.c;break;case "type":l=d.p;break;default:l=null}if(!(0<g.length&&
0!=f.trim(g).length&&null!=l)||f.startsWith(l,g)){l={text:l,type:d.k,description:p.formatDoc(d.d)};var h=d.k;if(null==h)window.console.warn("TODO: "+n.string(d));else switch(h){case "enum":l.type="enum";l.rightLabel=d.t;break;case "enumabstract":l.type="enum";l.rightLabel=d.t;break;case "global":l.type="global";break;case "literal":l.type="keyword";break;case "local":l.type="value";l.rightLabel=d.t;break;case "member":l.type="member";l.rightLabel=d.t;break;case "package":l.type="package";break;case "static":l.displayText=
d.c+"()";l.rightLabel=d.t;l.snippet=d.c+"()$0";l.type="method";break;case "type":l.type="type";l.text=d.p;break;default:window.console.warn("TODO: "+n.string(d))}h=d.k;if(null!=q[h]?!b.existsReserved(h):!b.h.hasOwnProperty(h)){h=d.k;var k=[];null!=q[h]?b.setReserved(h,k):b.h[h]=k}d=d.k;(null!=q[d]?b.getReserved(d):b.h[d]).push(l)}}a=[];for(e=new G(b,b.arrayKeys());e.hasNext();)e.next().sort(function(a,b){return a.text>b.text?1:a.text<b.text?-1:0});if(null!=q.local?b.existsReserved("local"):b.h.hasOwnProperty("local"))a=
a.concat(null!=q.local?b.getReserved("local"):b.h.local);if(null!=q["static"]?b.existsReserved("static"):b.h.hasOwnProperty("static"))a=a.concat(null!=q["static"]?b.getReserved("static"):b.h["static"]);if(null!=q.global?b.existsReserved("global"):b.h.hasOwnProperty("global"))a=a.concat(null!=q.global?b.getReserved("global"):b.h.global);if(null!=q.literal?b.existsReserved("literal"):b.h.hasOwnProperty("literal"))a=a.concat(null!=q.literal?b.getReserved("literal"):b.h.literal);if(null!=q.type?b.existsReserved("type"):
b.h.hasOwnProperty("type"))a=a.concat(null!=q.type?b.getReserved("type"):b.h.type);if(null!=q["package"]?b.existsReserved("package"):b.h.hasOwnProperty("package"))a=a.concat(null!=q["package"]?b.getReserved("package"):b.h["package"]);if(null!=q["enum"]?b.existsReserved("enum"):b.h.hasOwnProperty("enum"))a=a.concat(null!=q["enum"]?b.getReserved("enum"):b.h["enum"]);c(a)})["catch"](function(a){b.onError(a)})}}else c([])}))["catch"](function(a){window.console.error(a);return Promise.resolve([])})},onDidInsertSuggestion:function(a){},
dispose:function(){this.disposables.dispose()}};var F=function(a){w.call(this);this.hxml=a};F.__name__=!0;F.__super__=w;F.prototype=h(w.prototype,{start:function(a){null==a&&(a=!1);var b=this;this.args=["--cwd",this.hxml.getParent().getPath()];a&&this.args.push("-v");this.args.push(this.hxml.getBaseName());window.console.log("%chaxe "+this.args.join(" "),"color:#F1471D;");d.server.query(this.args,null,function(a){b.emit("end",0)},function(a){a=f.trim(a);window.console.log(a);b.emit("error",a);b.emit("end",
null)},function(a){b.emit("message",a)});this.emit("start",null)}});var N=function(a){this.editor=a;this.parser=new DOMParser};N.__name__=!0;N.prototype={callArgument:function(a,b){return this.query(a,null,b).then(function(a){var b=a.getAttribute("d");return{d:null==b?null:f.trim(b),t:f.trim(a.childNodes[0].nodeValue)}})},fieldAccess:function(a,b){return this.query(a,null,b).then(function(a){if(null==a)return[];for(var b=[],c=0,e=a.children.length;c<e;){var d=c++;d=a.children[d];var g=d.getElementsByTagName("t")[0].childNodes[0],
h=d.getElementsByTagName("d")[0].childNodes[0];b.push({n:d.getAttribute("n"),k:d.getAttribute("k"),t:null==g?null:g.nodeValue,d:null==h?null:f.trim(h.nodeValue)})}return b})},topLevel:function(a,b){return this.query(a,"toplevel",b).then(function(a){if(null==a)return[];for(var b=[],c=0,e=a.children.length;c<e;){var d=c++;d=a.children[d];var g=d.getAttribute("d");b.push({k:d.getAttribute("k"),n:d.getAttribute("n"),t:d.getAttribute("t"),d:null==g?null:f.trim(g),p:d.getAttribute("p"),c:d.childNodes[0].nodeValue})}return b})},
query:function(a,b,c){var e=this;return new Promise(function(f,g){null==a&&(a=e.editor.getCursorBufferPosition());var l=e.editor.getTextInBufferRange(new E(new D(0,0),a)),h=l.length;h=""+e.editor.getPath()+"@"+h;null!=b&&(h+="@"+b);var k=["--display",h];null!=d.hxml&&(k=[d.hxml.getPath()].concat(k));null!=c&&(k=k.concat(c));null!=e.lastQuery&&H.equals(e.lastQuery,k,function(a,b){return a==b})?f(e.lastQueryXml):d.server.query(k,l,function(a){e.parser=new DOMParser;a=e.parser.parseFromString(a,"application/xml").documentElement;
e.lastQuery=k;e.lastQueryXml=a;f(a)},function(a){window.console.warn(a);f(null)},function(a){window.console.warn(a);g(a)})})}};var d=c.xxx.IDE=function(){};d.__name__=!0;d.activate=function(a){d.disposables=new P;d.emitter=new w;d.statusbar=new C;d.projectPaths=atom.project.getPaths();d.server=new J(atom.config.get("xxx.haxe_path"),!1);d.searchHxmlFiles(null,null,function(b){d.hxmlFiles=b;null!=a&&null!=a.hxml?-1!=d.hxmlFiles.indexOf(a.hxml)&&d.selectHxml(a.hxml):d.selectHxml(b[0]);u.delay(function(){d.startServer()},
1E3*atom.config.get("xxx.haxe_server_startdelay")|0);d.disposables.add(atom.project.onDidChangePaths(function(a){for(var b=[],c=0;c<a.length;){var e=a[c];++c;for(var f=!0,g=0,h=d.projectPaths;g<h.length;){var k=h[g];++g;if(k==e){f=!1;break}}f&&b.push(e)}d.searchHxmlFiles(b,null,function(a){d.hxmlFiles=d.hxmlFiles.concat(a)});return d.projectPaths=a}));d.disposables.add(atom.workspace.observeTextEditors(function(a){a=a.getPath();null!=a&&t.extension(a)}))})};d.serialize=function(){return{hxml:null!=
d.hxml?d.hxml.getPath():null}};d.deactivate=function(){d.disposables.dispose();d.server.stop()};d.startServer=function(){d.server.start(function(a){null!=a?atom.notifications.addWarning(a):(d.disposables.add(atom.commands.add("atom-workspace","xxx:build",function(a){a=a.target.getAttribute("data-path");null!=a&&"hxml"==t.extension(a)&&null!=d.hxml&&a!=d.hxml.getPath()&&d.selectHxml(a);d.build()})),d.disposables.add(atom.commands.add("atom-workspace","xxx:goto",function(a){d.goto()})),d.disposables.add(atom.commands.add("atom-workspace",
"xxx:restart-server",function(a){d.server.stop();return u.delay(d.startServer,100)})))},function(a){})};d.goto=function(){var a=atom.workspace.getActiveTextEditor();if(null!=a){var b=a.getCursorBufferPosition();a.getTextInBufferRange(new E(new D(b.row,0),b))}};d.onSelectHxml=function(a){return d.emitter.on("hxml_select",a)};d.onBuild=function(a){return d.emitter.on("build",a)};d.getConfig=function(a){return atom.config.get("xxx."+a)};d.selectHxml=function(a){if(null==a)d.hxml=null;else{if(null!=d.hxml&&
a==d.hxml.getPath())return;d.hxml=new A(a)}d.emitter.emit("hxml_select",d.hxml)};d.build=function(){if(null==d.hxml)return atom.notifications.addWarning("No hxml file selected"),null;var a=new F(d.hxml);new v(a);d.emitter.emit("build",a);a.start();return a};d.searchHxmlFiles=function(a,b,c){null==a&&(a=atom.project.getPaths());null==b&&(b=atom.config.get("xxx.hxml_search_depth"));for(var e=function(a,c,d){null==d&&(d=0);var f=[];R.readdir(a,function(g,h){if(null!=g)c(f);else{var l=h.length;if(0==
l)c(f);else for(g=0;g<h.length;){var k=[h[g]];++g;var m=U.resolve(a,k[0]);k[0]=m;R.stat(k[0],function(a){return function(g,h){null!=h&&h.isDirectory()?d<b?(g=a[0],h=function(){return function(a){f=f.concat(a);0==--l&&c(f)}}(),e(g,h,d+1)):0==--l&&c(f):("hxml"==t.extension(a[0])&&"extraParams.hxml"!=t.withoutDirectory(a[0])&&f.push(a[0]),0==--l&&c(f))}}(k))}}})},d=[],f=0,g=0;g<a.length;){var h=a[g];++g;e(h,function(b){d=d.concat(b);(f+=1)==a.length&&c(d)})}};d.consumeStatusBar=function(a){a.addLeftTile({item:d.statusbar.element,
priority:-100})};d.provideAutoCompletion=function(){d.autocomplete=new p;d.autocomplete.onError=function(a){d.statusbar.setMeta(a)};return d.autocomplete};d.provideService=function(){return{getHxml:function(){return d.hxml},selectHxml:d.selectHxml,build:d.build}};var O=function(a,b){this.error=b;this.element=window.document.createElement("li");this.element.classList.add("message","error");var c=window.document.createElement("i");c.textContent=n.string(a+1);this.element.appendChild(c);a=window.document.createElement("span");
a.classList.add("path");a.textContent=b.path;this.element.appendChild(a);a=window.document.createElement("span");a.classList.add("line");a.textContent=null==b.line?"null":""+b.line;this.element.appendChild(a);null!=b.characters&&(a=window.document.createElement("span"),a.classList.add("start"),a.textContent=n.string(b.characters.start),this.element.appendChild(a),a=window.document.createElement("span"),a.classList.add("end"),a.textContent=n.string(b.characters.end),this.element.appendChild(a));a=
window.document.createElement("span");a.classList.add("content");a.textContent=b.content;this.element.appendChild(a)};O.__name__=!0;O.prototype={select:function(){}};var v=function(a){var b=this;null!=v.current&&v.current.destroy();v.current=this;this.element=window.document.createElement("div");this.element.classList.add("xxx-build","resizer","native-key-bindings");this.element.setAttribute("tabindex","-1");this.messages=window.document.createElement("ol");this.messages.classList.add("messages",
"scroller");this.element.appendChild(this.messages);this.panel=atom.workspace.addBottomPanel({item:this.element,visible:!0});var c=[];a.on("start",function(){b.timeStart=window.performance.now();c=[]});a.on("message",function(a){b.log(a)});a.on("error",function(a){for(var d=0,e=a.split("\n");d<e.length;){var f=e[d];++d;f=[r.parse(f)];if(null==f[0])b.log(a,"error");else{c.push(f[0]);var g=[new O(b.messages.children.length,f[0])];g[0].element.onclick=function(a,b){return function(c){a[0].select();c.ctrlKey&&
v.openErrorPosition(b[0])}}(g,f);b.messages.appendChild(g[0].element)}}});a.on("end",function(d){if(0==d)0==b.messages.children.length&&b.panel.hide();else if(0<c.length){d=c[0];var e=a.hxml.getPath(),f=t.directory(e)+"/"+d.path;(new A(f,!1)).existsSync()||(e=atom.project.relativizePath(e),d.path=e[0]+"/"+d.path)}});this.element.addEventListener("click",k(this,this.handleClick),!1)};v.__name__=!0;v.openPosition=function(a,b,c,d,f,g){null==f&&(f=!0);null==d&&(d=!0);atom.workspace.open(a,{initialLine:b,
initialColumn:c,activatePane:d,searchAllPanes:f}).then(function(a){null!=g&&g(a)})};v.openErrorPosition=function(a){var b=a.line-1;v.openPosition(a.path,b,a.character,null,null,function(c){null!=a.characters&&c.setSelectedBufferRange(new E(new D(b,a.characters.start),new D(b,a.characters.end)))})};v.prototype={destroy:function(){this.panel.destroy()},log:function(a,b){a=f.trim(a);if(0!=a.length){var c=window.document.createElement("li");c.classList.add("message");null!=b&&c.classList.add(b);b=window.document.createElement("span");
b.classList.add("time");b.textContent=n.string(window.performance.now()-this.timeStart|0);c.appendChild(b);b=window.document.createElement("span");b.classList.add("content");b.textContent=a;c.appendChild(b);this.messages.appendChild(c)}},handleClick:function(a){a.ctrlKey&&this.panel.hide()}};var C=function(){var a=this;this.element=window.document.createElement("div");this.element.classList.add("status-bar-xxx","inline-block");this.icon=window.document.createElement("span");this.icon.classList.add("icon-haxe");
this.element.appendChild(this.icon);this.info=window.document.createElement("a");this.info.classList.add("info");this.element.appendChild(this.info);this.meta=window.document.createElement("span");this.meta.classList.add("meta");this.element.appendChild(this.meta);d.emitter.on("hxml_select",k(this,this.changeHxml));d.emitter.on("build",function(b){var c=null,d=0;b.on("start",function(){c=window.performance.now();a.changeStatus("active")});b.on("message",function(a){});b.on("error",function(b){d+=
1;a.changeStatus("error")});b.on("end",function(b){if(0==b){a.changeStatus("success");b=(window.performance.now()-c)/1E3;b=null==b?"null":""+b;var e=b.indexOf(".");a.meta.textContent=b.substring(0,e)+b.substring(e,3)+"s"}else a.changeStatus("error"),a.meta.textContent="("+d+")"})});this.info.addEventListener("click",k(this,this.handleClickInfo),!1)};C.__name__=!0;C.getRelativePath=function(a){a=atom.project.relativizePath(a);var b=a[0].split("/");return b[b.length-1]+"/"+a[1]};C.prototype={setMeta:function(a){this.meta.textContent=
a},dispose:function(){this.info.removeEventListener("click",k(this,this.handleClickInfo));null!=this.contextMenu&&this.contextMenu.dispose()},changeHxml:function(a){null==a?(this.icon.style.display="none",this.info.textContent=""):(this.icon.style.display="inline-block",a=C.getRelativePath(a.getPath()),this.info.textContent=t.withoutExtension(a));this.meta.textContent="";this.buildContextMenu()},changeStatus:function(a){a!=this.status&&(null!=this.status&&(this.icon.classList.remove(this.status),
this.info.classList.remove(this.status)),this.status=a,null!=a&&(this.icon.classList.add(a),this.info.classList.add(a)))},buildContextMenu:function(){null!=this.contextMenu&&this.contextMenu.dispose();var a=[];null!=d.hxml&&(a.push({label:"Build",command:"xxx:build"}),a.push({type:"separator"}));for(var b=0,c=d.hxmlFiles;b<c.length;){var f=c[b];++b;null!=d.hxml&&d.hxml.getPath()==f||a.push({label:C.getRelativePath(f),command:"xxx:select-hxml"})}this.contextMenu=atom.contextMenu.add({".status-bar-xxx .info":a})},
handleClickInfo:function(a){a.ctrlKey?d.build():null!=d.hxml&&atom.workspace.open(d.hxml.getPath())}};var S=0;String.__name__=!0;Array.__name__=!0;var q={};module.exports=d;r.EXPR=new m("^\\s*(.+):([0-9]+):\\s*(characters*|lines)\\s([0-9]+)(-([0-9]+))?\\s:\\s(.+)$","i");p.EXPR_ALPHANUMERIC_END=new m("[^a-zA-Z0-9_\\]\\)]([\\.0-9]+)$","");p.EXPR_PREFIX_FIELD=new m("\\.([a-zA-Z_][a-zA-Z_0-9]*)$","");p.EXPR_PREFIX_CALL=new m("\\(( *)$","");p.EXPR_TYPEPATH=new m("(import|using)\\s+([a-zA-Z0-9_]+(?:\\.[a-zA-Z0-9_]+)*)(?:\\s+(?:in|as)\\s+([a-zA-Z0-9_]+))?",
"g");d.COLOR_HAXE_1="#F68712";d.COLOR_HAXE_2="#F47216";d.COLOR_HAXE_3="#F1471D";d.COLOR_HAXE_4="#FFF200";d.EVENT_SELECT_HXML="hxml_select";d.EVENT_BUILD="build"})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);
